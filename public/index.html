<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

	<!-- Basic Page Needs
  ================================================== -->
	<meta charset="utf-8">
	 <title>Think Copter</title>
	<meta name="description" content="">
	<meta name="author" content="">

	<!-- Mobile Specific Metas
  ================================================== -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<!-- Scripts
  ================================================== -->
<script>
  var _prum = [['id', '53990a9aabe53d3335964be6'],
  ['mark', 'firstbyte', (new Date()).getTime()]];
  (function() {
    var s = document.getElementsByTagName('script')[0]
    , p = document.createElement('script');
    p.async = 'async';
    p.src = '//rum-static.pingdom.net/prum.min.js';
    s.parentNode.insertBefore(p, s);
  })();
  </script>
  <script src="/dronestream/nodecopter-client.js" type="text/javascript" charset="utf-8"></script>

  <script src="epoch/d3.min.js"></script>
  <script src="epoch/jquery-2.1.1.min.js"></script>
  <script src="epoch/epoch.0.5.2.min.js"></script>
	<!-- CSS
  ================================================== -->
	<link rel="stylesheet" href="stylesheets/base.css">
	<link rel="stylesheet" href="stylesheets/skeleton.css">
	<link rel="stylesheet" href="stylesheets/layout.css">
	<link rel="stylesheet" type="text/css" href="epoch/epoch.0.5.2.min.css">
  <link rel="stylesheet" type="text/css" href="epoch/basic.css">

	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Favicons
	================================================== -->
	<!-- <link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
 -->
</head>
<body>
 <!-- Google Tag Manager -->
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-TTPRZV"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-TTPRZV');</script>
  <!-- End Google Tag Manager -->
  <script type="text/javascript" src="build/droneWebControls.js"></script>
	<!-- Primary Page Layout
	================================================== -->

	<div class="container">
		<div class="sixteen columns">
			<h1 class="remove-bottom" style="margin-top: 40px">Think Copter Project</h1>
			<h5>Version .1</h5>
		</div>
    <div id="drone-choice-form" class="sixteen columns">
        <form>
            <label for = "drone-choice">Select a drone</label>
              <select id = "drone-choice">
                <option value = "oakland">oakland</option>
                <option value = "seattle">seattle</option>
              </select>
        </form>
        <input type="button" id="connect" value="connect"></input>
      </div>
    <div id="droneControls" class="eight columns">
			<h3>Manual Drone Controls</h3>
			<p>

    <input type="button" id="panic" value="panic"></input>

    <input type="button" id="launch" value="launch" > </input>

    <input type="button" id="land" value="land"> </input>

    <input type="button" id="recover" value="recover"> </input>

    <input type="button" id="rotate" value="rotate" > </input>

    <input type="button" id="stop" value="stop rotate"> </input>

    <input type="button" id="forward" value="forward"> </input>

    <input type="button" id="back" value="back"> </input>

    <input type="button" id="right" value="right"> </input>

    <input type="button" id="left" value="left"> </input>

  </div>
  <div class = "dataVis four columns">
      <div id="gaugeChart" class="epoch gauge-small"></div>
      <div class="small">Attention</div>
  </div>
	<div class = "dataVis four columns">
			<div id="barChart" class="epoch category20 barChart"></div>
      <div class="medium">Poor Signal Value</div>
    </div>
		<div id="droneStream" class="sixteen columns">
			<h3>Dronestream Feed</h3>
			<p><!--<script type="text/javascript" charset="utf-8">
new NodecopterStream(document.getElementById("droneStream"));
      </script>--></p>
		</div>
  <div class = "dataVis sixteen columns">
       <div id="lineChart" class="epoch category20 lineChart"></div>
       <div class="large two-columns">Neural Output</div>
  </div>



		</div>

	</div><!-- container -->

<script src="//cdn.socket.io/socket.io-1.0.0.js"></script>
  <script>

  </script>
  <script>
var guage =  $('#gaugeChart').epoch({
type: 'time.gauge',
domain: [ 0, 200 ],
ticks: 10,
tickSize: 10,
value: 10,
format: function(v) {return (v).toFixed(0);}
});
var lineChartData = [

{
  label: "Delta",
  values: [ {time: (new Date()).getTime()/1000, y: 42}]
},
{
  label: "Theta",
  values: [ {time: (new Date()).getTime()/1000, y: 42}]
},
{
  label: "lowAlpha",
  values: [ {time: (new Date()).getTime()/1000, y: 42}]
},
{
 label: "highAlpha",
 values: [ {time: (new Date()).getTime()/1000, y: 42}]
},
{
  label: "lowBeta",
  values: [ {time: (new Date()).getTime()/1000, y: 42}]
},
{
  label: "highBeta",
  values: [ {time: (new Date()).getTime()/1000, y: 42}]
},
{
  label: "lowGamma",
  values: [ {time: (new Date()).getTime()/1000, y: 42}]
},
{
  label: "highGamma",
  values: [ {time: (new Date()).getTime()/1000, y: 42}]
}
];
var barChartData = [{
  label: "Poor Signal",
  values: [ {time: (new Date()).getTime()/1000, y: 200} ]
}]
var readOut =
      $('#lineChart').epoch({
           type: 'time.line',
           data: lineChartData,
           axes: ['left', 'bottom', 'right']
     });

var sig =
  $('#barChart').epoch({
    type: 'time.line',
    data: barChartData,
    axes: ['left', 'bottom' ]
  });

var socket = io.connect('http://thinkcopter.com');

socket.on('connected', function(data) {
    console.log('connected!');
    });

socket.on('brainData', function(data){
    console.log('poorSignal:' + data.poorSignalValue);
    console.log('attention:' + data.attention );
    console.log('meditation:' + data.meditation );
    console.log('delta:' + data.delta );
    console.log('theta:' + data.theta );
    console.log('lowAlpha:' + data.lowAlpha );
    console.log('highAlpha:' + data.highAlpha );
    console.log('lowBeta:' + data.lowBeta );
    console.log('highBeta:' + data.highBeta );
    console.log('lowGamma:'  + data.lowGamma );
    console.log('highGamma:' + data.highGamma );

    guage.push(data.attention);

    var currentTime = (new Date()).getTime()/1000;

    lineChartData  = [ {time: currentTime, y: data.delta}, {time: currentTime, y: data.theta}, {time: currentTime, y: data.lowAlpha}, {time: currentTime, y: data.highAlpha}, {time: currentTime, y: data.lowBeta}, {time: currentTime, y: data.highBeta}, {time: currentTime, y: data.lowGamma}, {time: currentTime, y: data.highBeta} ];
      readOut.push(lineChartData);

    barChartData = [{time: currentTime, y: data.poorSignalValue}];
    sig.push(barChartData);
   });

   </script>
<!-- End Document
================================================== -->
</body>
</html>
